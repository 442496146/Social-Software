(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-space/user-space"],{"14c6":function(e,t,n){"use strict";n.r(t);var r=n("1a80"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"190f":function(e,t,n){"use strict";var r=n("529c"),a=n.n(r);a.a},"1a80":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("4795")),a=i(n("5378"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||f(e,t)||s(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)if(n.push(o.value),t&&n.length===t)break}catch(s){a=!0,i=s}finally{try{r||null==u["return"]||u["return"]()}finally{if(a)throw i}}return n}}function l(e){if(Array.isArray(e))return e}function d(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){d(i,r,a,o,u,"next",e)}function u(e){d(i,r,a,o,u,"throw",e)}o(void 0)}))}}var p=function(){n.e("components/user-space/user-space-head").then(function(){return resolve(n("1b7e"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/home/home-data").then(function(){return resolve(n("1fc8"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/index/swiper-tab-head").then(function(){return resolve(n("4e6d"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/user-space/user-space-userinfo").then(function(){return resolve(n("8845"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/common/common-list").then(function(){return resolve(n("50fd"))}.bind(null,n)).catch(n.oe)},x=function(){n.e("components/common/load-more").then(function(){return resolve(n("7456"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("components/user-space/user-space-popup").then(function(){return resolve(n("0c9f"))}.bind(null,n)).catch(n.oe)},k=function(){n.e("components/common/no-thing").then(function(){return resolve(n("f137"))}.bind(null,n)).catch(n.oe)},y={components:{userSpaceHead:p,homeData:m,swiperTabHead:b,userSpaceUserinfo:g,commonList:v,loadMore:x,userSpacePopup:w,noThing:k},data:function(){return{show:!1,userinfo:{bgimg:1,userpic:"",username:"",sex:0,age:20,isguanzhu:!1,regtime:"",id:0,birthday:"",job:"",path:"",qg:""},spacedata:[{name:"获赞",num:0},{name:"关注",num:0},{name:"粉丝",num:0}],tabIndex:0,tabBars:[{name:"主页",id:"zhuye"},{name:"星事",id:"qiushi"},{name:"动态",id:"dongtai"}],tablist:[{},{loadtext:"上拉加载更多",list:[],page:1,firstload:!1},{loadtext:"上拉加载更多",list:[],page:1,firstload:!1}]}},onReachBottom:function(){this.loadmore()},onNavigationBarButtonTap:function(e){0==e.index&&this.togleShow()},onLoad:function(e){this.__init(e.userid)},methods:{__init:function(e){this.getUserInfo(e),this.getCounts(e)},getUserInfo:function(e){var t=this;return h(r.default.mark((function n(){var i,u,s,c,f,l,d,h,p,m;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(["未知","男","女"],i=["秘密","未婚","已婚"],e!=t.User.userinfo.id){n.next=9;break}s=t.User.userinfo,u=!0,c=!1,f=!1,n.next=21;break;case 9:return n.next=11,t.$http.get("/getuserinfo/"+e,{},{token:!0});case 11:if(l=n.sent,d=o(l,2),h=d[0],p=d[1],t.$http.errorCheck(h,p)){n.next=17;break}return n.abrupt("return");case 17:s=p.data.data,u=!1,c=!!p.data.data.fens.length,f=!!p.data.data.blacklist.length;case 21:m=s.create_time?a.default.gettime.dateFormat(new Date(s.create_time),"{Y}-{MM}-{DD}"):"未知",t.userinfo={isme:u,bgimg:1,userpic:s.userpic,username:s.username,sex:s.userinfo.sex||"未知",age:s.userinfo.age,isguanzhu:c,isblack:f,regtime:m,id:s.id,birthday:s.userinfo.birthday||"未知",job:s.userinfo.job||"未知",path:s.userinfo.path||"未知",qg:i[s.userinfo.qg]||"秘密"};case 23:case"end":return n.stop()}}),n)})))()},getCounts:function(e){var t=this;return h(r.default.mark((function n(){var a,i,u,s,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e!=t.User.userinfo.id){n.next=4;break}a=t.User.counts,n.next=13;break;case 4:return n.next=6,t.$http.get("/user/getcounts/"+e);case 6:if(i=n.sent,u=o(i,2),s=u[0],c=u[1],t.$http.errorCheck(s,c)){n.next=12;break}return n.abrupt("return");case 12:a=c.data.data;case 13:a&&(t.spacedata[0].num=a.post_count,t.spacedata[1].num=a.withfollow_count,t.spacedata[2].num=a.withfen_count),console.log(a.post_count);case 15:case"end":return n.stop()}}),n)})))()},updateGuanZhu:function(t){this.userinfo.isguanzhu=t;var n={type:"guanzhu",userid:this.userinfo.id,data:t};e.$emit("updateData",n)},togleShow:function(){if(this.userinfo.id===this.User.userinfo.id)return this.User.navigate({url:"/pages/user-set-userinfo/user-set-userinfo"});this.show=!this.show},lahei:function(){var t=this;return h(r.default.mark((function n(){var a,i,u,s,c,f;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showLoading({title:"Loading...",mask:!1}),a=t.userinfo.isblack?"/removeblack":"/addblack",i=t.userinfo.isblack?"移除黑名单":"加入黑名单",n.next=5,t.$http.post(a,{id:t.userinfo.id},{token:!0,checkToken:!0,checkAuth:!0});case 5:if(u=n.sent,s=o(u,2),c=s[0],f=s[1],t.$http.errorCheck(c,f)){n.next=12;break}return e.hideLoading(),n.abrupt("return",t.togleShow());case 12:e.hideLoading(),e.showToast({title:i+"成功"}),t.userinfo.isblack=!t.userinfo.isblack,t.togleShow();case 16:case"end":return n.stop()}}),n)})))()},goToChat:function(){var e={userid:this.userinfo.id,userpic:this.userinfo.userpic,username:this.userinfo.username};this.User.navigate({url:"/pages/user-chat/user-chat?userinfo="+JSON.stringify(e)}),this.togleShow()},loadmore:function(){"上拉加载更多"==this.tablist[this.tabIndex].loadtext&&(this.tablist[this.tabIndex].loadtext="加载中...",this.tablist[this.tabIndex].page++,this.getList())},tabtap:function(e){this.tabIndex=e,this.tablist[e].firstload||0===e||this.getList()},getList:function(){var e=this;return h(r.default.mark((function t(){var n,a,i,u,s,c,f,l,d,h;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.tablist[e.tabIndex].page,a=e.userinfo.isme?"/user/post/".concat(n):"/user/".concat(e.userinfo.id,"/post/").concat(n),i=e.tabIndex,t.next=5,e.$http.get(a,{},{token:!0});case 5:if(u=t.sent,s=o(u,2),c=s[0],f=s[1],console.log(f),e.$http.errorCheck(c,f)){t.next=13;break}return e.tablist[i].firstload=!0,t.abrupt("return",e.tablist[i].loadtext="上拉加载更多");case 13:for(l=[],d=f.data.data.list,h=0;h<d.length;h++)l.push(e.__format(d[h]));return e.tablist[i].list=n>1?e.tablist[i].list.concat(l):l,e.tablist[i].firstload=!0,e.tablist[i].loadtext=d.length<10?"没有更多数据了":"上拉加载更多",t.abrupt("return");case 20:case"end":return t.stop()}}),t)})))()},__format:function(e){var t={userid:e.user.id,userpic:e.user.userpic,username:e.user.username,isguanzhu:!!e.user.fens.length,id:e.id,title:e.title,type:"img",titlepic:e.titlepic,video:!1,path:e.path,share:!!e.share,infonum:{index:e.support.length>0?e.support[0].type+1:0,dingnum:e.ding_count,cainum:e.cai_count},goodnum:e.ding_count,commentnum:e.comment_count,sharenum:e.sharenum,sex:e.user.userinfo.sex,age:e.user.userinfo.age};return e.user_id===this.User.userinfo.id&&(t.isguanzhu=!0),t}}};t.default=y}).call(this,n("543d")["default"])},4590:function(e,t,n){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}))},"529c":function(e,t,n){},c701:function(e,t,n){"use strict";(function(e){n("a2a3");r(n("66fd"));var t=r(n("e6e0"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e6e0:function(e,t,n){"use strict";n.r(t);var r=n("4590"),a=n("14c6");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("190f");var o,u=n("f0c5"),s=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=s.exports}},[["c701","common/runtime","common/vendor"]]]);