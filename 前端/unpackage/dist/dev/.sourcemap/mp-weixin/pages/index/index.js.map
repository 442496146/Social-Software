{"version":3,"sources":["uni-app:///main.js","webpack:///F:/HBuilderProjects/HCI/demo/pages/index/index.vue?adc5","webpack:///F:/HBuilderProjects/HCI/demo/pages/index/index.vue?ac63","webpack:///F:/HBuilderProjects/HCI/demo/pages/index/index.vue?c218","webpack:///F:/HBuilderProjects/HCI/demo/pages/index/index.vue?2948","uni-app:///pages/index/index.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=7fb4a0d8&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"F:/HBuilderProjects/HCI/demo/pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=7fb4a0d8&\"","var components = {\n  uniNavBar: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"uni-tab-bar\">\r\n      \r\n\t<!-- 导航栏 -->\r\n\t<!-- #ifndef APP-PLUS -->\r\n\t<uni-nav-bar :shadow=\"false\" :border=\"false\" \r\n\t@click-left=\"clickLeft\" @click-right=\"clickRight\">\r\n\t\t<!-- 左边图标 -->\r\n\t\t<block slot=\"left\">\r\n\t\t\t<view class=\"iconfont icon-qiandao\" style=\"font-size: 22px;color: #FF9619;margin-left: 20upx;\"></view>\r\n\t\t</block>\r\n\t\t<!-- 中间搜索框 -->\r\n\t\t<view style=\"display: flex;justify-content: center;align-items: center;border-radius: 4px;margin-left: -46upx;height: 60upx;margin-top: 12upx;color: #CCCCCC;background: #F7F7F7;\" @tap=\"openSearch\">\r\n\t\t\t<view class=\"iconfont icon-sousuo\" style=\"margin-right: 6upx;\"></view>搜索星事\r\n\t\t</view>\r\n\t\t<!-- 右边图标 -->\r\n\t\t<block slot=\"right\">\r\n\t\t\t<view class=\"icon iconfont icon-bianji1\" style=\"font-size: 22px;color: #000000;\"></view>\r\n\t\t</block>\r\n\t</uni-nav-bar>\r\n\t<!-- #endif -->\r\n\t  \r\n\t  \r\n\t<swiper-tab-head \r\n\t:tabBars=\"tabBars\" \r\n\t:tabIndex=\"tabIndex\"\r\n\t@tabtap=\"tabtap\">\r\n\t</swiper-tab-head>\r\n\t\r\n\r\n\t<swiper class=\"swiper-box\" \r\n\t:style=\"getHeight\"\r\n\t:current=\"tabIndex\"\r\n\t@change=\"tabChange\">\r\n\t\t<swiper-item v-for=\"(items,index) in newslist\" :key=\"index\" :style=\"getHeight\"> \r\n\t\t\t<scroll-view scroll-y class=\"list\" @scrolltolower=\"loadmore(index)\" :style=\"getHeight\">\r\n\t\t\t\t<template v-if=\"items.list.length>0\">\r\n\t\t\t\t\t<!-- 图文列表 -->\r\n\t\t\t\t\t<block v-for=\"(item,index1) in items.list\" :key=\"index1\">\r\n\t\t\t\t\t\t<index-list @changeevent=\"updateData\" :item=\"item\" :index=\"index1\"></index-list>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t<load-more :loadtext=\"items.loadtext\"></load-more>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else-if=\"!items.firstload\">\r\n\t\t\t\t\t<view style=\"font-size: 50upx;font-weight: bold;color: #CCCCCC;\r\n\t\t\t\t\tpadding-top: 100upx;\" class=\"u-f-ajc\">Loading ...</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<!-- 无内容默认 -->\r\n\t\t\t\t\t<no-thing></no-thing>\r\n\t\t\t\t</template>\r\n\t\t\t</scroll-view>\r\n\t\t</swiper-item>\r\n\t</swiper>   \r\n\t\r\n\t   \r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\n\t// #ifndef APP-PLUS\r\n\timport uniNavBar from \"../../components/uni-nav-bar/uni-nav-bar.vue\";\r\n\t// #endif\r\n\timport indexList from \"../../components/index/index-list.vue\";\r\n\timport swiperTabHead from \"../../components/index/swiper-tab-head.vue\";\r\n\timport loadMore from \"../../components/common/load-more.vue\";\r\n\timport noThing from \"../../components/common/no-thing.vue\";\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tindexList,\r\n\t\t\tswiperTabHead,\r\n\t\t\tloadMore,\r\n\t\t\tnoThing,\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tuniNavBar\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttabIndex:0,\r\n\t\t\t\ttabBars:[],\t\r\n\t\t\t\tnewslist:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tgetHeight() {\r\n\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\tlet height = uni.getSystemInfoSync().windowHeight +uni.upx2px(100) - 44;\r\n\t\t\t\treturn `height: ${height}px;`;\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getNav();\r\n\t\t\t// 开启监听\r\n\t\t\tuni.$on('updateData',this.updateData);\r\n\t\t},\r\n\t\t// 监听搜索框点击事件\r\n\t\tonNavigationBarSearchInputClicked() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../search/search',\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 监听原生标题导航按钮点击事件\r\n\t\tonNavigationBarButtonTap(e){\r\n\t\t\tswitch (e.index){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t// 打开发布页面\r\n\t\t\t\tthis.User.navigate({\r\n\t\t\t\t\turl: '../add-input/add-input?postclass='+JSON.stringify(this.tabBars),\r\n\t\t\t\t})\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tclickLeft(){\r\n\t\t\t\tconsole.log('左边事件')\r\n\t\t\t},\r\n\t\t\tclickRight(){\r\n\t\t\t\t// 打开发布页面\r\n\t\t\t\tthis.User.navigate({\r\n\t\t\t\t\turl: '../add-input/add-input?postclass='+JSON.stringify(this.tabBars),\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenSearch(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../search/search',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tupdateData(data){\r\n\t\t\t\tswitch (data.type){\r\n\t\t\t\t\tcase \"guanzhu\":\r\n\t\t\t\t\tthis.updateGuanZhu(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"support\":\r\n\t\t\t\t\tthis.updateSupport(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"updateList\":\r\n\t\t\t\t\tthis.updateList(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'updateComment':\r\n\t\t\t\t\tthis.updateComment(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 更新评论数\r\n\t\t\tupdateComment(data){\r\n\t\t\t\t// 拿到当前对象\r\n\t\t\t\tlet obj = this.newslist[this.tabIndex].list.find(value =>{\r\n\t\t\t\t\treturn value.id === data.post_id;\r\n\t\t\t\t});\r\n\t\t\t\tif (!obj) return;\r\n\t\t\t\tobj.commentnum++; // 评论数+1\r\n\t\t\t},\r\n\t\t\t// 更新关注信息\r\n\t\t\tupdateGuanZhu(data){\r\n\t\t\t\tthis.newslist[this.tabIndex].list.forEach((item,index)=>{\r\n\t\t\t\t\tif (item.userid === data.userid) {\r\n\t\t\t\t\t\titem.isguanzhu = data.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 更新顶踩数据状态\r\n\t\t\tupdateSupport(data){\r\n\t\t\t\t// 拿到当前对象\r\n\t\t\t\tlet obj = this.newslist[this.tabIndex].list.find(value =>{\r\n\t\t\t\t\treturn value.id === data.post_id;\r\n\t\t\t\t});\r\n\t\t\t\tif (!obj) return;\r\n\t\t\t\tlet oldindex = obj.infonum.index; // 操作前的状态\r\n\t\t\t\tobj.infonum.index = (data.do == 'ding') ? 1 : 2; // 操作后的状态\r\n\t\t\t\tif (oldindex !== 0) { //之前操作过\r\n\t\t\t\t\toldindex == 1 ? obj.infonum.dingnum-- : obj.infonum.cainum--;\r\n\t\t\t\t}\r\n\t\t\t\tif (obj.infonum.index !== 0) {  // 当前操作\r\n\t\t\t\t\tobj.infonum.index == 1 \r\n\t\t\t\t\t\t? obj.infonum.dingnum++ : obj.infonum.cainum++;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 更新用户发布信息\r\n\t\t\tupdateList(data){\r\n\t\t\t\t// 第一种，直接追加\r\n\t\t\t\tlet index = this.tabBars.findIndex((val)=>{\r\n\t\t\t\t\treturn val.id === data.post_class_id;\r\n\t\t\t\t})\r\n\t\t\t\tif (index > -1) {\r\n\t\t\t\t\tthis.newslist[index].list.push(this.__format(data));\r\n\t\t\t\t}\r\n\t\t\t\t// 第二种，重新加载当前post_class_id信息\r\n\t\t\t},\r\n\t\t\t// 获取文章分类\r\n\t\t\tasync getNav(){\r\n\t\t\t\tlet [err,res] =await this.$http.get('/postclass');\r\n\t\t\t\tif (!this.$http.errorCheck(err,res)) return;\r\n\t\t\t\tlet list = res.data.data.list;\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tlet arr2 = [];\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\tid:list[i].id,\r\n\t\t\t\t\t\tname:list[i].classname\r\n\t\t\t\t\t})\r\n\t\t\t\t\tarr2.push({\r\n\t\t\t\t\t\tloadtext:\"上拉加载更多\",\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstload:false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.tabBars = arr;\r\n\t\t\t\tthis.newslist = arr2;\r\n\t\t\t\tthis.tabBars.length > 0 && this.getList();\r\n\t\t\t},\r\n\t\t\t// 获取指定列表\r\n\t\t\tasync getList(){\r\n\t\t\t\tlet currentIndex = this.tabIndex;\r\n\t\t\t\tlet url = `/postclass/${this.tabBars[this.tabIndex].id}/post/${this.newslist[this.tabIndex].page}`;\r\n\t\t\t\tlet [err,res] = await this.$http.get(url,{},{token:true});\r\n\t\t\t\tlet error = this.$http.errorCheck(err,res,()=>{\r\n\t\t\t\t\tthis.newslist[currentIndex].loadtext=\"上拉加载更多\";\r\n\t\t\t\t},()=>{\r\n\t\t\t\t\tthis.newslist[currentIndex].loadtext=\"上拉加载更多\";\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif (!error) return;\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tlet list = res.data.data.list;\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tarr.push(this.__format(list[i]));\r\n\t\t\t\t}\r\n\t\t\t\tthis.newslist[currentIndex].list = this.newslist[currentIndex].page > 1 ? this.newslist[currentIndex].list.concat(arr) : arr;\r\n\t\t\t\tthis.newslist[currentIndex].firstload = true;\r\n\t\t\t\tif (list.length < 10) {\r\n\t\t\t\t\tthis.newslist[currentIndex].loadtext=\"没有更多数据了\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.newslist[currentIndex].loadtext=\"上拉加载更多\";\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\t// 格式转化\r\n\t\t\t__format(item){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tuserid:item.user.id,\r\n\t\t\t\t\tuserpic:item.user.userpic,\r\n\t\t\t\t\tusername:item.user.username,\r\n\t\t\t\t\tisguanzhu:!!item.user.fens.length,\r\n\t\t\t\t\tid:item.id,\r\n\t\t\t\t\ttitle:item.title,\r\n\t\t\t\t\ttype:\"img\", // img:图文,video:视频\r\n\t\t\t\t\ttitlepic:item.titlepic,\r\n\t\t\t\t\tvideo:false,\r\n\t\t\t\t\tpath:item.path,\r\n\t\t\t\t\tshare:!!item.share,\r\n\t\t\t\t\tinfonum:{\r\n\t\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\r\n\t\t\t\t\t\tdingnum:item.ding_count,\r\n\t\t\t\t\t\tcainum:item.cai_count,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcommentnum:item.comment_count,\r\n\t\t\t\t\tsharenum:item.sharenum,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 上拉加载\r\n\t\t\tloadmore(index){\r\n\t\t\t\tif(this.newslist[index].loadtext!=\"上拉加载更多\"){ return; }\r\n\t\t\t\t// 修改状态\r\n\t\t\t\tthis.newslist[index].loadtext=\"加载中...\";\r\n\t\t\t\tthis.newslist[this.tabIndex].page++;\r\n\t\t\t\tthis.getList();\r\n\t\t\t},\r\n\t\t\t// tabbar点击事件\r\n\t\t\ttabtap(index){\r\n\t\t\t\tthis.tabIndex=index;\r\n\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\tthis.getList();\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 滑动事件\r\n\t\t\ttabChange(e){\r\n\t\t\t\tthis.tabIndex=e.detail.current;\r\n\t\t\t\tthis.getList();\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}